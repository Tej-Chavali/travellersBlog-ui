{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useHistory,useParams}from\"react-router-dom\";import axios from\"axios\";import Style from\"./blog.module.css\";import Blogheader from\"../../components/blogheader\";import ReactMarkdown from\"react-markdown\";import Skeleton,{SkeletonTheme}from\"react-loading-skeleton\";var Article=function Article(){var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),article=_useState2[0],setArticle=_useState2[1];var _useParams=useParams(),slug=_useParams.slug;useEffect(function(){getDataBySlug(slug);},[slug]);var getDataBySlug=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(slug){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://travellers-blog.herokuapp.com/api/post/\".concat(slug));case 3:res=_context.sent;setArticle(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log({error:_context.t0});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getDataBySlug(_x){return _ref.apply(this,arguments);};}();var deleteArticle=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.confirm(\"Do you wanna delete this article?\")){_context2.next=11;break;}_context2.prev=1;axios.defaults.headers.common[\"Authorization\"]=sessionStorage.token;_context2.next=5;return axios.delete(\"https://travellers-blog.herokuapp.com/api/delete/\".concat(id));case 5:history.push(\"/\");_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log({error:_context2.t0});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function deleteArticle(_x2){return _ref2.apply(this,arguments);};}();var editDeleteArticle=function editDeleteArticle(id){console.log(sessionStorage.testKey);if(sessionStorage.token){return/*#__PURE__*/React.createElement(\"div\",{className:Style.buttons},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return history.push(\"/edit/\".concat(slug));},className:\"btn btn-primary m-2\"},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return deleteArticle(id);},className:\"btn btn-danger m-2\"},\"Delete\"));}};var renderMarkdown=function renderMarkdown(){if(article.markdown===undefined){return/*#__PURE__*/React.createElement(SkeletonTheme,{color:\"#161f27\",highlightColor:\"#324759\"},/*#__PURE__*/React.createElement(Skeleton,{count:15}));}else{return/*#__PURE__*/React.createElement(ReactMarkdown,{className:Style.markdown,source:article.markdown});}};return/*#__PURE__*/React.createElement(\"div\",{className:Style.article},/*#__PURE__*/React.createElement(\"div\",{className:Style.controlHeader},/*#__PURE__*/React.createElement(Blogheader,{image:article.image,title:article.title,description:article.description,createdAt:article.createdAt}),editDeleteArticle(article._id)),/*#__PURE__*/React.createElement(\"hr\",null),renderMarkdown());};export default Article;","map":{"version":3,"sources":["E:/Tej-Ofc/Github/travellersBlog-ui/src/routes/blog/index.js"],"names":["React","useEffect","useState","useHistory","useParams","axios","Style","Blogheader","ReactMarkdown","Skeleton","SkeletonTheme","Article","history","article","setArticle","slug","getDataBySlug","get","res","data","console","log","error","deleteArticle","id","window","confirm","defaults","headers","common","sessionStorage","token","delete","push","editDeleteArticle","testKey","buttons","renderMarkdown","markdown","undefined","controlHeader","image","title","description","createdAt","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Style from \"./blog.module.css\";\nimport Blogheader from \"../../components/blogheader\";\nimport ReactMarkdown from \"react-markdown\";\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\";\n\nconst Article = () => {\n  let history = useHistory();\n  const [article, setArticle] = useState({});\n  const { slug } = useParams();\n\n  useEffect(() => {\n    getDataBySlug(slug);\n  }, [slug]);\n\n  const getDataBySlug = async (slug) => {\n    try {\n      const res = await axios.get(`https://travellers-blog.herokuapp.com/api/post/${slug}`);\n      setArticle(res.data);\n    } catch (err) {\n      console.log({ error: err });\n    }\n  };\n\n  const deleteArticle = async (id) => {\n    if (window.confirm(\"Do you wanna delete this article?\")) {\n      try {\n        axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n        await axios.delete(`https://travellers-blog.herokuapp.com/api/delete/${id}`);\n        history.push(\"/\");\n      } catch (err) {\n        console.log({ error: err });\n      }\n    }\n  };\n\n  const editDeleteArticle = (id) => {\n    console.log(sessionStorage.testKey);\n    if (sessionStorage.token) {\n      return (\n        <div className={Style.buttons}>\n          <button\n            onClick={() => history.push(`/edit/${slug}`)}\n            className=\"btn btn-primary m-2\"\n          >\n            Edit\n          </button>\n          <button\n            onClick={() => deleteArticle(id)}\n            className=\"btn btn-danger m-2\"\n          >\n            Delete\n          </button>\n        </div>\n      );\n    }\n  };\n\n  const renderMarkdown = () => {\n    if (article.markdown === undefined) {\n      return (\n        <SkeletonTheme color=\"#161f27\" highlightColor=\"#324759\">\n          <Skeleton count={15} />\n        </SkeletonTheme>\n      );\n    } else {\n      return (\n        <ReactMarkdown className={Style.markdown} source={article.markdown} />\n      );\n    }\n  };\n\n  return (\n    <div className={Style.article}>\n      <div className={Style.controlHeader}>\n        <Blogheader\n          image={article.image}\n          title={article.title}\n          description={article.description}\n          createdAt={article.createdAt}\n        />\n        {editDeleteArticle(article._id)}\n      </div>\n      <hr />\n      {renderMarkdown()}\n    </div>\n  );\n};\n\nexport default Article;\n"]},"metadata":{},"sourceType":"module"}