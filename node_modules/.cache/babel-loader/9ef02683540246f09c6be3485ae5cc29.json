{"ast":null,"code":"var _jsxFileName = \"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\src\\\\routes\\\\manageBlog\\\\index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nconst ManageBlog = () => {\n  let history = useHistory();\n  let {\n    slug\n  } = useParams();\n  const [editing, setEditing] = useState(false);\n  const [id, setId] = useState(\"\");\n  const [article, setArticle] = useState({\n    image: \"\",\n    title: \"\",\n    description: \"\",\n    markdown: \"\"\n  });\n  useEffect(() => {\n    if (slug) {\n      getArticleBySlug(slug);\n      setEditing(true);\n    }\n  }, [slug]);\n\n  const getArticleBySlug = async slug => {\n    try {\n      const res = await axios.get(`https://travellers-blog.herokuapp.com/api/post/${slug}`);\n      setArticle(res.data);\n      setId(res.data._id);\n    } catch (err) {\n      console.log({\n        error: err\n      });\n    }\n  };\n\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setArticle({ ...article,\n      [name]: value\n    });\n  };\n\n  const onSubmit = async event => {\n    event.preventDefault();\n\n    if (sessionStorage.token) {\n      if (editing) {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.put(`https://travellers-blog.herokuapp.com/api/update/${id}`, article);\n          history.push(`/article/${slug}`);\n        } catch (err) {\n          console.log({\n            error: err\n          });\n        }\n      } else {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.post(\"https://travellers-blog.herokuapp.com/api/new/post\", article);\n          history.push(\"/\");\n        } catch (err) {\n          console.log({\n            error: err\n          });\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control mb-3\",\n    \"aria-label\": \"Default\",\n    \"aria-describedby\": \"inputGroup-sizing-default\",\n    type: \"text\",\n    required: true,\n    placeholder: \"Image Url\",\n    name: \"image\",\n    value: article.image,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control mb-3\",\n    type: \"text\",\n    required: true,\n    placeholder: \"Title\",\n    name: \"title\",\n    value: article.title,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control mb-3\",\n    type: \"text\",\n    required: true,\n    placeholder: \"Description\",\n    name: \"description\",\n    value: article.description,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control mb-3 h-50\",\n    required: true,\n    rows: \"15\",\n    placeholder: \"Enter Text here\",\n    name: \"markdown\",\n    value: article.markdown,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger m-2\",\n    onClick: () => history.goBack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary m-2\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, editing ? \"Update\" : \"Create\")));\n};\n\nexport default ManageBlog;","map":{"version":3,"sources":["E:/Tej-Ofc/Github/travellersBlog-ui/src/routes/manageBlog/index.js"],"names":["React","useState","useEffect","axios","useHistory","useParams","ManageBlog","history","slug","editing","setEditing","id","setId","article","setArticle","image","title","description","markdown","getArticleBySlug","res","get","data","_id","err","console","log","error","handleInputChange","event","name","value","target","onSubmit","preventDefault","sessionStorage","token","defaults","headers","common","put","push","post","goBack"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nconst ManageBlog = () => {\n  let history = useHistory();\n  let { slug } = useParams();\n  const [editing, setEditing] = useState(false);\n  const [id, setId] = useState(\"\");\n  const [article, setArticle] = useState({\n    image: \"\",\n    title: \"\",\n    description: \"\",\n    markdown: \"\",\n  });\n\n  useEffect(() => {\n    if (slug) {\n      getArticleBySlug(slug);\n      setEditing(true);\n    }\n  }, [slug]);\n\n  const getArticleBySlug = async (slug) => {\n    try {\n      const res = await axios.get(`https://travellers-blog.herokuapp.com/api/post/${slug}`);\n      setArticle(res.data);\n      setId(res.data._id);\n    } catch (err) {\n      console.log({ error: err });\n    }\n  };\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    setArticle({ ...article, [name]: value });\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n\n    if (sessionStorage.token) {\n      if (editing) {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.put(`https://travellers-blog.herokuapp.com/api/update/${id}`, article);\n          history.push(`/article/${slug}`);\n        } catch (err) {\n          console.log({ error: err });\n        }\n      } else {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.post(\"https://travellers-blog.herokuapp.com/api/new/post\", article);\n          history.push(\"/\");\n        } catch (err) {\n          console.log({ error: err });\n        }\n      }\n    }\n  };\n\n  return (\n    <form onSubmit={onSubmit}>\n      <input\n        className=\"form-control mb-3\"\n        aria-label=\"Default\"\n        aria-describedby=\"inputGroup-sizing-default\"\n        type=\"text\"\n        required\n        placeholder=\"Image Url\"\n        name=\"image\"\n        value={article.image}\n        onChange={handleInputChange}\n      />\n      <input\n        className=\"form-control mb-3\"\n        type=\"text\"\n        required\n        placeholder=\"Title\"\n        name=\"title\"\n        value={article.title}\n        onChange={handleInputChange}\n      />\n      <input\n        className=\"form-control mb-3\"\n        type=\"text\"\n        required\n        placeholder=\"Description\"\n        name=\"description\"\n        value={article.description}\n        onChange={handleInputChange}\n      />\n      <textarea\n        className=\"form-control mb-3 h-50\"\n        required\n        rows=\"15\"\n        placeholder=\"Enter Text here\"\n        name=\"markdown\"\n        value={article.markdown}\n        onChange={handleInputChange}\n      />\n      <div className=\"d-flex justify-content-center\">\n        <button className=\"btn btn-danger m-2\" onClick={() => history.goBack()}>\n          Cancel\n        </button>\n        <button className=\"btn btn-primary m-2\" type=\"submit\">\n          {editing ? \"Update\" : \"Create\"}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default ManageBlog;\n"]},"metadata":{},"sourceType":"module"}