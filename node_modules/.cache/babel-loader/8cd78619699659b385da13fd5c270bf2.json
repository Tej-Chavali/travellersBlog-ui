{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import axios from\"axios\";var Login=function Login(){var history=useHistory();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),loginForm=_useState2[0],setLoginForm=_useState2[1];var handleInputChange=function handleInputChange(event){console.log(event.target);console.log(loginForm);var _event$target=event.target,name=_event$target.name,value=_event$target.value;setLoginForm(_objectSpread({},loginForm,_defineProperty({},name,value)));};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"https://travellers-blog.herokuapp.com/api/user/login\",loginForm);case 4:response=_context.sent;sessionStorage.setItem(\"token\",response.data.token);sessionStorage.setItem(\"testKey\",\"Test Value\");if(sessionStorage.token){history.push(\"/\");}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.log({error:_context.t0});case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center mt-5\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"h2\",null,\"Login\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control mb-3 mt-3\",placeholder:\"Email\",type:\"email\",required:true,name:\"email\",value:loginForm.email,onChange:handleInputChange}),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control mb-3\",placeholder:\"Password\",type:\"password\",required:true,name:\"password\",value:loginForm.password,onChange:handleInputChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center mb-5\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-info\",type:\"submit\"},\"Login\"))));};export default Login;","map":{"version":3,"sources":["E:/Tej-Ofc/Github/travellersBlog-ui/src/routes/login/index.js"],"names":["React","useState","useHistory","axios","Login","history","email","password","loginForm","setLoginForm","handleInputChange","event","console","log","target","name","value","onSubmit","preventDefault","post","response","sessionStorage","setItem","data","token","push","error"],"mappings":"0mBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClB,GAAIC,CAAAA,OAAO,CAAGH,UAAU,EAAxB,CADkB,cAEgBD,QAAQ,CAAC,CACzCK,KAAK,CAAE,EADkC,CAEzCC,QAAQ,CAAE,EAF+B,CAAD,CAFxB,wCAEXC,SAFW,eAEAC,YAFA,eAOlB,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAAW,CACnCC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,MAAlB,EACAF,OAAO,CAACC,GAAR,CAAYL,SAAZ,EAFmC,kBAGXG,KAAK,CAACG,MAHK,CAG3BC,IAH2B,eAG3BA,IAH2B,CAGrBC,KAHqB,eAGrBA,KAHqB,CAInCP,YAAY,kBAAMD,SAAN,oBAAkBO,IAAlB,CAAyBC,KAAzB,GAAZ,CACD,CALD,CAOA,GAAMC,CAAAA,QAAQ,0FAAG,iBAAON,KAAP,+HACfA,KAAK,CAACO,cAAN,GADe,sCAGUf,CAAAA,KAAK,CAACgB,IAAN,CACrB,sDADqB,CAErBX,SAFqB,CAHV,QAGPY,QAHO,eAObC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAgCF,QAAQ,CAACG,IAAT,CAAcC,KAA9C,EACAH,cAAc,CAACC,OAAf,CAAuB,SAAvB,CAAkC,YAAlC,EACA,GAAID,cAAc,CAACG,KAAnB,CAA0B,CACxBnB,OAAO,CAACoB,IAAR,CAAa,GAAb,EACD,CAXY,iFAabb,OAAO,CAACC,GAAR,CAAY,CAAEa,KAAK,YAAP,CAAZ,EAba,qEAAH,kBAART,CAAAA,QAAQ,4CAAd,CAiBA,mBACE,2BAAK,SAAS,CAAC,oCAAf,eACE,4BAAM,QAAQ,CAAEA,QAAhB,eACE,sCADF,cAEE,6BACE,SAAS,CAAC,wBADZ,CAEE,WAAW,CAAC,OAFd,CAGE,IAAI,CAAC,OAHP,CAIE,QAAQ,KAJV,CAKE,IAAI,CAAC,OALP,CAME,KAAK,CAAET,SAAS,CAACF,KANnB,CAOE,QAAQ,CAAEI,iBAPZ,EAFF,cAWE,6BACE,SAAS,CAAC,mBADZ,CAEE,WAAW,CAAC,UAFd,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,KAJV,CAKE,IAAI,CAAC,UALP,CAME,KAAK,CAAEF,SAAS,CAACD,QANnB,CAOE,QAAQ,CAAEG,iBAPZ,EAXF,cAoBE,2BAAK,SAAS,CAAC,oCAAf,eACE,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,IAAI,CAAC,QAAtC,UADF,CApBF,CADF,CADF,CA8BD,CA7DD,CA+DA,cAAeN,CAAAA,KAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst Login = () => {\n  let history = useHistory();\n  const [loginForm, setLoginForm] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleInputChange = (event) => {\n    console.log(event.target);\n    console.log(loginForm);\n    const { name, value } = event.target;\n    setLoginForm({ ...loginForm, [name]: value });\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      const response = await axios.post(\n        \"https://travellers-blog.herokuapp.com/api/user/login\",\n        loginForm\n      );\n      sessionStorage.setItem(\"token\", response.data.token);\n      sessionStorage.setItem(\"testKey\", \"Test Value\");\n      if (sessionStorage.token) {\n        history.push(\"/\");\n      }\n    } catch (err) {\n      console.log({ error: err });\n    }\n  };\n\n  return (\n    <div className=\"d-flex justify-content-center mt-5\">\n      <form onSubmit={onSubmit}>\n        <h2>Login</h2>\n        <input\n          className=\"form-control mb-3 mt-3\"\n          placeholder=\"Email\"\n          type=\"email\"\n          required\n          name=\"email\"\n          value={loginForm.email}\n          onChange={handleInputChange}\n        />\n        <input\n          className=\"form-control mb-3\"\n          placeholder=\"Password\"\n          type=\"password\"\n          required\n          name=\"password\"\n          value={loginForm.password}\n          onChange={handleInputChange}\n        />\n        <div className=\"d-flex justify-content-center mb-5\">\n          <button className=\"btn btn-info\" type=\"submit\">\n            Login\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}