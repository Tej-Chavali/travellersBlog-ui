{"ast":null,"code":"import _defineProperty from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\Tej-Ofc\\\\Github\\\\travellersBlog-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useHistory,useParams}from\"react-router-dom\";var ManageBlog=function ManageBlog(){var history=useHistory();var _useParams=useParams(),slug=_useParams.slug;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),id=_useState4[0],setId=_useState4[1];var _useState5=useState({image:\"\",title:\"\",description:\"\",markdown:\"\"}),_useState6=_slicedToArray(_useState5,2),article=_useState6[0],setArticle=_useState6[1];useEffect(function(){if(slug){getArticleBySlug(slug);setEditing(true);}},[slug]);var getArticleBySlug=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(slug){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://travellers-blog.herokuapp.com/api/post/\".concat(slug));case 3:res=_context.sent;setArticle(res.data);setId(res.data._id);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log({error:_context.t0});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getArticleBySlug(_x){return _ref.apply(this,arguments);};}();var handleInputChange=function handleInputChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setArticle(_objectSpread({},article,_defineProperty({},name,value)));};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!sessionStorage.token){_context2.next=25;break;}if(!editing){_context2.next=15;break;}_context2.prev=3;axios.defaults.headers.common[\"Authorization\"]=sessionStorage.token;_context2.next=7;return axios.put(\"https://travellers-blog.herokuapp.com/api/update/\".concat(id),article);case 7:history.push(\"/article/\".concat(slug));_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);console.log({error:_context2.t0});case 13:_context2.next=25;break;case 15:_context2.prev=15;axios.defaults.headers.common[\"Authorization\"]=sessionStorage.token;_context2.next=19;return axios.post(\"https://travellers-blog.herokuapp.com/api/new/post\",article);case 19:history.push(\"/\");_context2.next=25;break;case 22:_context2.prev=22;_context2.t1=_context2[\"catch\"](15);console.log({error:_context2.t1});case 25:case\"end\":return _context2.stop();}}},_callee2,null,[[3,10],[15,22]]);}));return function onSubmit(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"input\",{className:\"form-control mb-3\",\"aria-label\":\"Default\",\"aria-describedby\":\"inputGroup-sizing-default\",type:\"text\",required:true,placeholder:\"Image Url\",name:\"image\",value:article.image,onChange:handleInputChange}),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control mb-3\",type:\"text\",required:true,placeholder:\"Title\",name:\"title\",value:article.title,onChange:handleInputChange}),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control mb-3\",type:\"text\",required:true,placeholder:\"Description\",name:\"description\",value:article.description,onChange:handleInputChange}),/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control mb-3 h-50\",required:true,rows:\"15\",placeholder:\"Enter Text here\",name:\"markdown\",value:article.markdown,onChange:handleInputChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger m-2\",onClick:function onClick(){return history.goBack();}},\"Cancel\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary m-2\",type:\"submit\"},editing?\"Update\":\"Create\")));};export default ManageBlog;","map":{"version":3,"sources":["E:/Tej-Ofc/Github/travellersBlog-ui/src/routes/manageBlog/index.js"],"names":["React","useState","useEffect","axios","useHistory","useParams","ManageBlog","history","slug","editing","setEditing","id","setId","image","title","description","markdown","article","setArticle","getArticleBySlug","get","res","data","_id","console","log","error","handleInputChange","event","target","name","value","onSubmit","preventDefault","sessionStorage","token","defaults","headers","common","put","push","post","goBack"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nconst ManageBlog = () => {\n  let history = useHistory();\n  let { slug } = useParams();\n  const [editing, setEditing] = useState(false);\n  const [id, setId] = useState(\"\");\n  const [article, setArticle] = useState({\n    image: \"\",\n    title: \"\",\n    description: \"\",\n    markdown: \"\",\n  });\n\n  useEffect(() => {\n    if (slug) {\n      getArticleBySlug(slug);\n      setEditing(true);\n    }\n  }, [slug]);\n\n  const getArticleBySlug = async (slug) => {\n    try {\n      const res = await axios.get(`https://travellers-blog.herokuapp.com/api/post/${slug}`);\n      setArticle(res.data);\n      setId(res.data._id);\n    } catch (err) {\n      console.log({ error: err });\n    }\n  };\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    setArticle({ ...article, [name]: value });\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n\n    if (sessionStorage.token) {\n      if (editing) {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.put(`https://travellers-blog.herokuapp.com/api/update/${id}`, article);\n          history.push(`/article/${slug}`);\n        } catch (err) {\n          console.log({ error: err });\n        }\n      } else {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.post(\"https://travellers-blog.herokuapp.com/api/new/post\", article);\n          history.push(\"/\");\n        } catch (err) {\n          console.log({ error: err });\n        }\n      }\n    }\n  };\n\n  return (\n    <form onSubmit={onSubmit}>\n      <input\n        className=\"form-control mb-3\"\n        aria-label=\"Default\"\n        aria-describedby=\"inputGroup-sizing-default\"\n        type=\"text\"\n        required\n        placeholder=\"Image Url\"\n        name=\"image\"\n        value={article.image}\n        onChange={handleInputChange}\n      />\n      <input\n        className=\"form-control mb-3\"\n        type=\"text\"\n        required\n        placeholder=\"Title\"\n        name=\"title\"\n        value={article.title}\n        onChange={handleInputChange}\n      />\n      <input\n        className=\"form-control mb-3\"\n        type=\"text\"\n        required\n        placeholder=\"Description\"\n        name=\"description\"\n        value={article.description}\n        onChange={handleInputChange}\n      />\n      <textarea\n        className=\"form-control mb-3 h-50\"\n        required\n        rows=\"15\"\n        placeholder=\"Enter Text here\"\n        name=\"markdown\"\n        value={article.markdown}\n        onChange={handleInputChange}\n      />\n      <div className=\"d-flex justify-content-center\">\n        <button className=\"btn btn-danger m-2\" onClick={() => history.goBack()}>\n          Cancel\n        </button>\n        <button className=\"btn btn-primary m-2\" type=\"submit\">\n          {editing ? \"Update\" : \"Create\"}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default ManageBlog;\n"]},"metadata":{},"sourceType":"module"}