(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{172:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(56),c=a.n(o),l=(a(67),a(15)),s=a(37),i=a(9),u=function(){var e=function(){sessionStorage.token&&sessionStorage.removeItem("token")};return r.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{class:"navbar-brand",href:"#"},r.a.createElement("img",{src:"/favicon.ico",width:"30",height:"30",class:"d-inline-block align-top m-1",alt:""}),"TRAVELLERS BLOG"),r.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{class:"navbar-toggler-icon"})),r.a.createElement("div",{class:"collapse navbar-collapse flex-grow-0",id:"navbarNavAltMarkup"},r.a.createElement("div",{class:"navbar-nav"},r.a.createElement(i.a,{class:"nav-link active",href:"#",to:"/"},"Home ",r.a.createElement("span",{class:"sr-only"},"(current)")),sessionStorage.token?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{class:"nav-link",to:"/new/article"},"Create"),r.a.createElement(i.a,{class:"nav-link text-right",style:{float:"right"},onClick:e,to:"/"},"Logout")):r.a.createElement(i.a,{class:"nav-link",to:"/login"},"Login"))))},m=a(59),p=a.n(m),d=function(){return r.a.createElement("footer",{className:p.a.footer},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/Tej-Chavali",target:"_blank",rel:"noopener noreferrer"},"GitHub"))))},h=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement("hr",null),t,r.a.createElement("hr",null),r.a.createElement(d,null))},b=a(3),f=a.n(b),g=a(11),v=a(12),E=a(36),k=a.n(E),w=a(4),x=a.n(w),_=a(20),j=a.n(_),y=a(60),O=a.n(y),N=a(16),S=a.n(N),C=function(e){var t=e.image,a=e.title,n=e.description,o=e.createdAt;return r.a.createElement(N.SkeletonTheme,{color:"#202020",highlightColor:"#444"},r.a.createElement("div",{className:j.a.headerContainer},r.a.createElement("div",{className:j.a.imgContainer},function(e){return void 0===e?r.a.createElement(S.a,{width:70,height:70}):r.a.createElement("img",{src:e,alt:"logo"})}(t)),r.a.createElement("div",{className:j.a.titleContainer},r.a.createElement("h3",{className:j.a.title},a||r.a.createElement(S.a,null)),r.a.createElement("p",{className:j.a.subtitle},n||r.a.createElement(S.a,null)," -"," ",r.a.createElement("span",null,O()(o).format("YYYY/MM/DD"))))))},A=function(){var e=Object(l.g)(),t=Object(n.useState)([]),a=Object(v.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://localhost:4000/api/post");case 3:t=e.sent,c(t.data.reverse()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:k.a.home},0===o.length?r.a.createElement("i",{className:"gg-spinner-two"}):o.map((function(t){return r.a.createElement("button",{key:t._id,className:k.a.button,onClick:function(){return e.push("/article/".concat(t.slug))}},r.a.createElement(C,{image:t.image,title:t.title,description:t.description,createdAt:t.createdAt}))})))},B=a(10),D=a(26),H=function(){var e=Object(l.g)(),t=Object(n.useState)({email:"",password:""}),a=Object(v.a)(t,2),o=a[0],c=a[1],s=function(e){console.log(e.target),console.log(o);var t=e.target,a=t.name,n=t.value;c(Object(D.a)({},o,Object(B.a)({},a,n)))},i=function(){var t=Object(g.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,x.a.post("http://localhost:4000/api/user/login",o);case 4:n=t.sent,sessionStorage.setItem("token",n.data.token),sessionStorage.setItem("testKey","Test Value"),sessionStorage.token&&e.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"d-flex justify-content-center mt-5"},r.a.createElement("form",{onSubmit:i},r.a.createElement("h2",null,"Login"),r.a.createElement("input",{className:"form-control mb-3 mt-3",placeholder:"Email",type:"email",required:!0,name:"email",value:o.email,onChange:s}),r.a.createElement("input",{className:"form-control mb-3",placeholder:"Password",type:"password",required:!0,name:"password",value:o.password,onChange:s}),r.a.createElement("div",{className:"d-flex justify-content-center mb-5"},r.a.createElement("button",{className:"btn btn-info",type:"submit"},"Login"))))},L=a(23),T=a.n(L),q=a(61),M=a.n(q),G=function(){var e=Object(l.g)(),t=Object(n.useState)({}),a=Object(v.a)(t,2),o=a[0],c=a[1],s=Object(l.h)().slug;Object(n.useEffect)((function(){i(s)}),[s]);var i=function(){var e=Object(g.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://localhost:4000/api/post/".concat(t));case 3:a=e.sent,c(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var t=Object(g.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Do you wanna delete this article?")){t.next=11;break}return t.prev=1,x.a.defaults.headers.common.Authorization=sessionStorage.token,t.next=5,x.a.delete("http://localhost:4000/api/delete/".concat(a));case 5:e.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log({error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:T.a.article},r.a.createElement("div",{className:T.a.controlHeader},r.a.createElement(C,{image:o.image,title:o.title,description:o.description,createdAt:o.createdAt}),function(t){if(console.log(sessionStorage.testKey),sessionStorage.token)return r.a.createElement("div",{className:T.a.buttons},r.a.createElement("button",{onClick:function(){return e.push("/edit/".concat(s))},className:"btn btn-primary m-2"},"Edit"),r.a.createElement("button",{onClick:function(){return u(t)},className:"btn btn-danger m-2"},"Delete"))}(o._id)),r.a.createElement("hr",null),void 0===o.markdown?r.a.createElement(N.SkeletonTheme,{color:"#161f27",highlightColor:"#324759"},r.a.createElement(S.a,{count:15})):r.a.createElement(M.a,{className:T.a.markdown,source:o.markdown}))},I=function(){var e=Object(l.g)(),t=Object(l.h)().slug,a=Object(n.useState)(!1),o=Object(v.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(""),u=Object(v.a)(i,2),m=u[0],p=u[1],d=Object(n.useState)({image:"",title:"",description:"",markdown:""}),h=Object(v.a)(d,2),b=h[0],E=h[1];Object(n.useEffect)((function(){t&&(k(t),s(!0))}),[t]);var k=function(){var e=Object(g.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://localhost:4000/api/post/".concat(t));case 3:a=e.sent,E(a.data),p(a.data._id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=e.target,a=t.name,n=t.value;E(Object(D.a)({},b,Object(B.a)({},a,n)))},_=function(){var a=Object(g.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!sessionStorage.token){a.next=25;break}if(!c){a.next=15;break}return a.prev=3,x.a.defaults.headers.common.Authorization=sessionStorage.token,a.next=7,x.a.put("http://localhost:4000/api/update/".concat(m),b);case 7:e.push("/article/".concat(t)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),console.log({error:a.t0});case 13:a.next=25;break;case 15:return a.prev=15,x.a.defaults.headers.common.Authorization=sessionStorage.token,a.next=19,x.a.post("http://localhost:4000/api/new/post",b);case 19:e.push("/"),a.next=25;break;case 22:a.prev=22,a.t1=a.catch(15),console.log({error:a.t1});case 25:case"end":return a.stop()}}),a,null,[[3,10],[15,22]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:_},r.a.createElement("input",{className:"form-control mb-3","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",type:"text",required:!0,placeholder:"Image Url",name:"image",value:b.image,onChange:w}),r.a.createElement("input",{className:"form-control mb-3",type:"text",required:!0,placeholder:"Title",name:"title",value:b.title,onChange:w}),r.a.createElement("input",{className:"form-control mb-3",type:"text",required:!0,placeholder:"Description",name:"description",value:b.description,onChange:w}),r.a.createElement("textarea",{className:"form-control mb-3 h-50",required:!0,rows:"15",placeholder:"Enter Text here",name:"markdown",value:b.markdown,onChange:w}),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-danger m-2",onClick:function(){return e.goBack()}},"Cancel"),r.a.createElement("button",{className:"btn btn-primary m-2",type:"submit"},c?"Update":"Create")))},z=function(){var e=Object(n.useContext)(l.e).location,t=Object(s.b)(e,(function(e){return e.pathname}),{from:{opacity:0,transform:"translate(0%, 0)"},enter:{opacity:1,transform:"translate(0%, 0)"},leave:{opacity:0,transform:"translate(-0%, 0)",position:"absolute"}});return r.a.createElement("div",{id:"App"},r.a.createElement(h,null,t.map((function(e){var t=e.item,a=e.props,n=e.key;return r.a.createElement(s.a.div,{key:n,style:a},r.a.createElement(l.d,{location:t},r.a.createElement(l.b,{strict:!0,exact:!0,path:"/",component:A}),r.a.createElement(l.b,{exact:!0,path:"/login",component:H}),r.a.createElement(l.b,{path:"/article/:slug",component:G}),r.a.createElement(l.b,{path:"/edit/:slug",component:I}),r.a.createElement(l.b,{path:"/new/article",component:I}),r.a.createElement(l.a,{to:"/"})))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(5),Y=Object(F.a)();a(171);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.c,{history:Y},r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,t,a){e.exports={headerContainer:"Blogheader_headerContainer__ufEFb",imgContainer:"Blogheader_imgContainer__KHSRH",titleContainer:"Blogheader_titleContainer__3GPEs",title:"Blogheader_title__1DS1g"}},23:function(e,t,a){e.exports={article:"blog_article__aZSyL",markdown:"blog_markdown__33mHG",buttons:"blog_buttons__3y6D2",linkButton:"blog_linkButton__Lb-gL",controlHeader:"blog_controlHeader__pSQCj"}},36:function(e,t,a){e.exports={home:"Home_home__2NA0f",button:"Home_button__us8r0"}},59:function(e,t,a){e.exports={footer:"Footer_footer__2BfiS"}},62:function(e,t,a){e.exports=a(172)},67:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.8649d540.chunk.js.map